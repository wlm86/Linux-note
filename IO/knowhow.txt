1- check and modify the bad blocks
1- dilatancy the raw and qcow2 img
2- tune2fs
3- du
4- stat -f .  # get the blocks information
5- sg_vpd
6-  Warning: partition is not properly aligned for best performance [KW. %]
7- block size & sector 
8- major and minor device number

1) check and modify the bad blocks
  1. how to check the bad blocks of disk
  # badblocks -s -v  -o /home/cdrom.log /dev/cdrom
  2. how to quckly check the bad blocks
  # smartctl -a  /dev/cdrom
  3. modify the bad blocks
  # badblocks -s -w /dev/sda END START
  # fsck -a /dev/sda
2) dilatancy the raw and qcow2 img
  --------raw-------------------
  1. # virsh shutdown vm1
  1. # dd if=/dev/zero bs=1024k count=5000 >> /sda6/wulm/I_img/rhel7.4_clone_1.img
  2. # qemu-img info /sda6/wulm/I_img/rhel7.4_clone_1.img
  3. # virsh start vm1
  4. # fdisk /dev/vda
  5. # mkfs.xfs /dev/vda4
  -------qcow2-----------------
  1. # virsh shutdown vm1
  2. # qemu-img resize rhel74.qcow2 +6G
  3. # virsh start vm1
  4. # fdisk /dev/vda
  5. # mkfs.xfs /dev/vda4
3) tune2fs 
  - adjust tunable filesystem parameters on ext2/ext3/ext4 filesystems
  1. clear the feature of partion
  -O :		Set or clear the indicated filesystem features (options) in the filesystem.
  ^dir_index:	will clear the indeicated features with ^.
  
  # /sbin/tune2fs -O ^dir_index /dev/sda1

  2. get the blocksize of partion, in general, 4096 byte.

  #/sbin/tune2fs -l /dev/sda1|grep "Block size" 
 
4) du
  1. get directory total size
   # du -csh
  
  2. get every directory size
   # du -lh
  
  3. get every file size
   # du -ah

5) how to see the hard info of disk
 #yum --disablerepo="*" --enablerepo="rhel7.3" install sg3_utils

 1. get the rotation rate of disk 
 # sg_vpd /dev/sda --page=bdc
  Block device characteristics VPD page (SBC):
  Nominal rotation rate: 7200 rpm
  Product type: Not specified

 2. get the ata information
 # sg_vpd /dev/sda --page=ai
  ATA information VPD page:
  SAT Vendor identification: linux
  SAT Product identification: libata
  SAT Product revision level: 3.00
  ATA command IDENTIFY DEVICE response summary:
    model: Hitachi HDP725050GLA360
    serial number:       GEC534RF240MVE
    firmware revision: GM4OA5CA

6. Warning: partition is not properly aligned for best performance 
  # parted -s /dev/sde mkpart primary xfs 0 100000
    Warning: The resulting partition is not properly aligned for best performance.

  solution:
  1) Get the alignment parameters for your array
   # cat /sys/block/sde/queue/optimal_io_size
	0  ---------------------------------> a
   # cat /sys/block/sde/queue/minimum_io_size
	4096 -------------------------------> b
   # cat /sys/block/sde/alignment_offset
	0 ----------------------------------> c
   # cat /sys/block/sde/queue/physical_block_size
	4096 -------------------------------> d		
  2) Add optimal_io_size to alignment_offset 
     and divide the result by physical_block_size.
     In my case this was (a+c)/d = 0
  3) This number is the sector at which the partition 
     should start. Your new parted command should look like
    # parted -s /dev/sde mkpart primary xfs 0 100000

  4) If all went well, the partition will have been created with no warnings. You can check the alignment thusly
    # parted -s /dev/sde mkpart primary xfs 1 100000
    # parted  /dev/sde align-check optimal 1
     1 aligned
 
    The trailing 's'  is important: it tells parted that you are
     talking about sectors, not bytes or megabytes.
    # parted -s /dev/sde mkpart primary xfs 1s 100000 (different with URL)
    # parted  /dev/sde align-check optimal 1
     1 not aligned
    https://rainbow.chard.org/2013/01/30/how-to-align-partitions-for-best-performance-using-parted/
    
   summary: using 0% is best and easiest method. (KW. % percntage)

8. major and minor device number

  # ls -l /dev/
   crw-------. 1 root root     10, 235 Dec  2 15:58 autofs
                                ^   ^
                              major minor
